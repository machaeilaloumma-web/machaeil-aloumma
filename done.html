<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ù…Ù„ÙÙŠ Ø§Ù„Ø´Ø®ØµÙŠ â€“ Ù…Ø´Ø§Ø¹Ù„ Ø§Ù„Ø£Ù…Ø© (Ù†Ø³Ø®Ø© Ø«Ø§Ø¨ØªØ© Ù„Ù„ØªØ¬Ø±Ø¨Ø©)</title>

  <!-- Ø®Ø· Ø¹Ø±Ø¨ÙŠ -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Kufi+Arabic:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --accent:#facc15;
      --bg:#0b0d10;
      --text:#ffffff;
      --muted:rgba(255,255,255,0.8);
      --glass:rgba(255,255,255,0.03);
      --overlay:rgba(0,0,0,0.6);
      --sidebar-w:260px;
      --radius:12px;
      --focus: 0 0 0 5px rgba(250,204,21,0.12);
    }
    [data-theme="light"]{
      --bg:#fafafa;--text:#0b1220;--muted:rgba(11,17,32,0.72);--glass:rgba(0,0,0,0.04);--overlay:rgba(0,0,0,0.06);
    }

    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%;font-family:'Noto Kufi Arabic',sans-serif;background:var(--bg);color:var(--text);-webkit-font-smoothing:antialiased}
    a{color:inherit;text-decoration:none}
    button{cursor:pointer;background:none;border:none;color:inherit;font:inherit}
    img{max-width:100%;height:auto;display:block}

    /* Layout */
    .layout{display:flex;align-items:flex-start;gap:20px;min-height:100vh}
    .sidebar{
      width:var(--sidebar-w);
      background: linear-gradient(180deg, rgba(18,18,20,0.98), rgba(12,12,14,0.98));
      padding:18px;display:flex;flex-direction:column;gap:12px;box-shadow:-6px 0 30px rgba(0,0,0,0.45);
      z-index:301;flex-shrink:0;transition:transform .28s,opacity .18s;
    }
    .sidebar.hide{transform:translateX(110%);opacity:0;pointer-events:none}
    .logo{width:120px;border-radius:10px;object-fit:cover}
    .title{text-align:center;font-weight:700;font-size:1rem;color:var(--text)}
    .nav{display:flex;flex-direction:column;gap:8px;padding-top:6px}
    .nav a{display:flex;align-items:center;gap:12px;padding:10px 12px;border-radius:10px;color:var(--text);transition:transform .12s,background .12s}
    .nav a svg{width:20px;height:20px;flex-shrink:0}
    .nav a:hover{background:var(--glass);color:var(--accent);transform:translateX(-6px)}
    .nav a:hover svg{stroke:currentColor}

    /* Header */
    header{position:fixed;top:0;left:0;right:0;height:64px;display:flex;align-items:center;gap:12px;padding:0 18px;background:linear-gradient(180deg,rgba(8,8,10,0.96),rgba(12,12,14,0.96));z-index:400;box-shadow:0 6px 18px rgba(0,0,0,0.45)}
    .menu-btn,.theme-btn,.user-btn{width:44px;height:44px;border-radius:10px;background:rgba(255,255,255,0.02);display:inline-flex;align-items:center;justify-content:center;transition:background .12s,transform .08s;color:var(--text)}
    .menu-btn[aria-expanded="true"],.menu-btn:focus,.theme-btn:focus,.user-btn:focus{box-shadow:var(--focus);outline:none;transform:translateY(-1px)}
    .menu-btn:hover,.theme-btn:hover,.user-btn:hover{background:rgba(255,255,255,0.03)}
    .search-bar{flex:1;position:relative;max-width:760px}
    .search-input{width:100%;padding:10px 44px 10px 12px;border-radius:10px;border:none;background:var(--glass);color:var(--text);outline:none}
    .search-bar .icon{position:absolute;top:50%;right:12px;transform:translateY(-50%);pointer-events:none;color:var(--muted)}
    .user-menu{position:absolute;top:64px;right:10px;min-width:220px;background:linear-gradient(180deg,rgba(16,16,18,0.98),rgba(12,12,14,0.98));border-radius:10px;box-shadow:0 12px 40px rgba(0,0,0,0.6);overflow:hidden;opacity:0;transform:translateY(-6px);pointer-events:none;transition:opacity .18s,transform .18s;z-index:410}
    .user-menu.show{opacity:1;transform:translateY(0);pointer-events:auto}
    .user-menu a{display:flex;align-items:center;gap:8px;padding:10px 12px;font-size:0.95rem;color:var(--text)}
    .user-menu a:hover{background:rgba(255,255,255,0.03);color:var(--accent)}

    #overlay{position:fixed;inset:0;background:var(--overlay);z-index:300;opacity:0;visibility:hidden;transition:opacity .25s,visibility .25s}
    #overlay.active{opacity:1;visibility:visible}

    main{flex:1;padding:28px;margin-top:80px;margin-right:var(--sidebar-w);transition:margin .2s;min-height:calc(100vh - 120px)}
    .sidebar.hide ~ main{margin-right:28px}
    .hero{position:relative;border-radius:12px;overflow:hidden;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.01));padding:6px}
    .hero img{width:100%;height:260px;object-fit:cover;border-radius:8px}
    .hero-title{text-align:center;padding:18px 6px;font-size:1.9rem;font-weight:700;color:var(--text)}

    .profile-container{background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.01));padding:22px;border-radius:16px;max-width:820px;margin:18px auto;box-shadow:0 12px 30px rgba(0,0,0,0.45)}
    h1{font-size:22px;margin-bottom:12px;text-align:center}
    .login-link{text-align:center;margin:12px 0;font-size:14px}
    .login-link a{color:var(--accent)}
    #qrResult{display:none;margin-top:8px}
    .info-item{display:flex;justify-content:space-between;padding:12px 0;border-bottom:1px solid rgba(255,255,255,0.04)}
    .info-label{color:var(--muted)}
    .info-value{font-weight:700}

    /* Buttons */
    .btn{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:10px;border:1px solid transparent;background:linear-gradient(90deg,var(--accent),#f9b200);color:#111;font-weight:600;cursor:pointer}
    .btn.secondary{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--text)}
    .btn.ghost{background:transparent;border:1px dashed rgba(255,255,255,0.06);color:var(--text)}
    .btn:focus{box-shadow:var(--focus)}
    .action-btn{width:100%;padding:10px;border-radius:10px;border:1px solid rgba(0,0,0,0.12);background:#111;color:var(--accent);font-weight:700}
    .action-btn:hover{transform:translateY(-3px);box-shadow:0 10px 30px rgba(0,0,0,0.45)}
    .logout-btn{background:transparent;color:#ff8080;border:1px solid rgba(255,128,128,0.08)}

    footer{margin-top:40px;padding:20px;text-align:center;color:rgba(255,255,255,0.8)}
    footer a{color:var(--accent);margin:0 6px}

    @media(max-width:900px){
      .layout{flex-direction:column}
      .sidebar{position:fixed;top:64px;right:0;height:calc(100vh - 64px);transform:translateX(100%);transition:transform .28s}
      .sidebar.hide{transform:translateX(100%)}
      main{margin-right:0;padding:18px;margin-top:80px}
      .hero img{height:200px}
      .menu-btn{display:inline-flex}
      .logo{width:100px}
      .search-bar{max-width:unset}
      .sidebar .close-btn{display:flex}
    }

    /* Icons use currentColor */
    svg[stroke]{stroke:currentColor !important;fill:none}
    .search-input::placeholder{color:rgba(255,255,255,0.7);opacity:1}
  </style>
</head>
<body>
  <div id="overlay" aria-hidden="true"></div>

  <!-- header -->
  <header role="banner">
    <button id="menuBtn" class="menu-btn" aria-label="ÙØªØ­ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©" aria-controls="sidebar" aria-expanded="true">
      <!-- fallback inline icon (menu) -->
      <svg width="20" height="20" viewBox="0 0 24 24" aria-hidden="true"><path stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16"/></svg>
    </button>

    <div class="search-bar" role="search" aria-label="Ø¨Ø­Ø«">
      <input class="search-input" type="text" placeholder="Ø§Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù…Ù†ØµØ©..." aria-label="Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù…Ù†ØµØ©">
      <span class="icon" aria-hidden="true">
        <svg width="18" height="18" viewBox="0 0 24 24"><path stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" d="M21 21l-4.35-4.35M11 19a8 8 0 1 1 0-16 8 8 0 0 1 0 16z"/></svg>
      </span>
    </div>

    <div style="display:flex;align-items:center;gap:8px;position:relative;">
      <button id="themeBtn" class="theme-btn" title="ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹" aria-pressed="false">
        <svg id="themeIcon" width="18" height="18" viewBox="0 0 24 24"><path stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
      </button>

      <div style="position:relative;">
        <button id="userBtn" class="user-btn" aria-haspopup="true" aria-expanded="false" aria-controls="userMenu" title="Ø­Ø³Ø§Ø¨ÙŠ">
          <svg width="18" height="18" viewBox="0 0 24 24"><path stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4" stroke-width="1.6"/></svg>
        </button>

        <div id="userMenu" class="user-menu" role="menu" aria-hidden="true">
          <a href="#" role="menuitem"><svg width="16" height="16" viewBox="0 0 24 24"><path stroke-width="1.6" d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4" stroke-width="1.6"/></svg>Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ</a>
          <a href="#" role="menuitem"><svg width="16" height="16" viewBox="0 0 24 24"><path stroke-width="1.6" d="M12 15v2M12 7v6M5 12h14"/></svg>Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</a>
          <a href="#" role="menuitem"><svg width="16" height="16" viewBox="0 0 24 24"><path stroke-width="1.6" d="M15 3H9v4H5v10h14V7h-4z"/></svg>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</a>
        </div>
      </div>
    </div>
  </header>

  <div class="layout" role="application">
    <!-- sidebar -->
    <aside id="sidebar" class="sidebar" role="navigation" aria-label="Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©">
      <button class="close-btn" id="closeSidebarBtn" aria-label="Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©" title="Ø¥ØºÙ„Ø§Ù‚" style="position:absolute;left:12px;top:12px;background:transparent;border:none;color:var(--text);font-size:18px;display:none">âœ–</button>
      <img src="https://images.unsplash.com/photo-1554774853-aa36d9b70c3b?q=80&w=640&auto=format&fit=crop" alt="Ø´Ø¹Ø§Ø± Ù…Ø´Ø§Ø¹Ù„ Ø§Ù„Ø£Ù…Ø©" class="logo" loading="lazy">
      <div class="title">Ø³ÙØ±Ø§Ø¡ Ø§Ù„Ù‚ÙŠÙ… â€” Ù…Ø´Ø§Ø¹Ù„ Ø§Ù„Ø£Ù…Ø©</div>
      <nav class="nav" aria-label="Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ØªÙ†Ù‚Ù„">
        <a href="#"><svg width="18" height="18" viewBox="0 0 24 24"><path stroke-width="1.6" d="M3 9.5L12 3l9 6.5V20a1 1 0 0 1-1 1h-5v-6H9v6H4a1 1 0 0 1-1-1V9.5z"/></svg>Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
        <a href="#"><svg width="18" height="18" viewBox="0 0 24 24"><path stroke-width="1.6" d="M4 19h16V8H4zM4 8l8-5 8 5"/></svg>Ø§Ù„Ø¯ÙˆØ±Ø§Øª Ø§Ù„ØªØ¯Ø±ÙŠØ¨ÙŠØ©</a>
        <a href="#"><svg width="18" height="18" viewBox="0 0 24 24"><path stroke-width="1.6" d="M8 7v6l4 2 4-2V7"/></svg>Ø§Ù„ÙˆØ±Ø´ ÙˆØ§Ù„ÙØ¹Ø§Ù„ÙŠØ§Øª</a>
        <a href="#"><svg width="18" height="18" viewBox="0 0 24 24"><path stroke-width="1.6" d="M3 7h18M7 7v13"/></svg>Ø§Ù„Ù…ÙƒØªØ¨Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©</a>
        <a href="#"><svg width="18" height="18" viewBox="0 0 24 24"><path stroke-width="1.6" d="M3 21v-6l9-4 9 4v6"/></svg>Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„Ø·Ù„Ø§Ø¨ÙŠØ©</a>
        <a href="#"><svg width="18" height="18" viewBox="0 0 24 24"><path stroke-width="1.6" d="M17 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/></svg>Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ ÙˆØ§Ù„ØªÙˆØ§ØµÙ„</a>
        <a href="#"><svg width="18" height="18" viewBox="0 0 24 24"><path stroke-width="1.6" d="M21 15V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v9"/></svg>Ø§Ù„Ø³Ø¬Ù„ ÙˆØ§Ù„Ù†Ø´Ø§Ø·</a>
      </nav>
    </aside>

    <!-- main -->
    <main role="main" aria-live="polite">
      <section class="hero" aria-labelledby="hero-title">
        <img src="https://images.unsplash.com/photo-1529070538774-1843cb3265df?q=80&w=1600&auto=format&fit=crop" alt="ØªØ¹Ù„Ù… ÙˆØªØ¯Ø±ÙŠØ¨" loading="lazy">
        <h2 id="hero-title" class="hero-title">Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ùƒ ÙÙŠ Ù…Ù„ÙÙƒ Ø§Ù„Ø´Ø®ØµÙŠ â€” Ù…Ø´Ø§Ø¹Ù„ Ø§Ù„Ø£Ù…Ø©</h2>
      </section>

      <section class="profile-container" aria-labelledby="profile-heading">
        <h1 id="profile-heading">Ù…Ù„ÙÙŠ Ø§Ù„Ø´Ø®ØµÙŠ</h1>

        <button id="logoutBtn" class="action-btn logout-btn" style="display:none">ğŸ”“ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>

        <div id="noAccountMessage" class="login-link" style="display:none">
          Ù„Ù… ØªÙÙ†Ø´Ø¦ Ø­Ø³Ø§Ø¨Ù‹Ø§ Ø¨Ø¹Ø¯. <a href="register.html">Ø§Ù†Ø¶Ù… ÙƒÙ€ "Ù†Ø¬Ù…"</a>
        </div>

        <div id="qrResult" aria-live="polite" style="display:block">
          <h3 style="color:var(--accent);margin-bottom:12px;text-align:center">âœ… Ø­Ø³Ø§Ø¨Ùƒ Ø¬Ø§Ù‡Ø²!</h3>
          <p style="color:var(--muted);margin-bottom:16px;text-align:center">Ø´Ø§Ø±Ùƒ Ù‡Ø°Ø§ Ø§Ù„Ø±Ù…Ø² Ù…Ø¹ Ø£Ø³ØªØ§Ø°Ùƒ Ù„ØªÙ‚ÙŠÙŠÙ…Ùƒ:</p>
          <!-- Ù†Ø¶Ø¹ ØµÙˆØ±Ø© Ø§ÙØªØ±Ø§Ø¶ÙŠØ© QR Ø·ÙˆØ§Ù„ Ø§Ù„ÙˆÙ‚Øª Ù„ØªØ¬Ø±Ø¨Ø© Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© -->
          <img id="qrImage" src="https://api.qrserver.com/v1/create-qr-code/?size=400x400&data=sample-demo" alt="Ø±Ù…Ø² QR Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø·Ø§Ù„Ø¨" style="width:240px;height:240px;display:block;margin:0 auto;border-radius:12px;" loading="lazy" />
          <div class="info-item"><span class="info-label">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„:</span><span class="info-value" id="fullNameDisplay">Ø£Ø­Ù…Ø¯ Ø·Ø§Ù„Ø¨</span></div>
          <div class="info-item"><span class="info-label">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ:</span><span class="info-value" id="emailDisplay">user@example.com</span></div>
          <div class="info-item"><span class="info-label">Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ:</span><span class="info-value" id="levelDisplay">Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ</span></div>
          <div class="info-item"><span class="info-label">Ø§Ø³Ù… Ø§Ù„Ù…Ø¤Ø³Ø³Ø©:</span><span class="info-value" id="institutionDisplay">Ù…Ø¯Ø±Ø³Ø© Ø§Ù„Ù†ÙˆØ±</span></div>
          <div class="info-item"><span class="info-label">Ø§Ù„ÙˆÙ„Ø§ÙŠØ©:</span><span class="info-value" id="provinceDisplay">Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±</span></div>
          <div class="info-item"><span class="info-label">Ø§Ù„Ø¨Ù„Ø¯ÙŠØ©:</span><span class="info-value" id="cityDisplay">Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©</span></div>
          <div class="info-item"><span class="info-label">Ø§Ù„Ø¬Ù†Ø³:</span><span class="info-value" id="genderDisplay">Ø°ÙƒØ±</span></div>

          <div style="margin-top:14px;display:grid;gap:8px">
            <button id="copyBtn" class="btn secondary" type="button" aria-label="Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·">Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·</button>
            <button id="printBtn" class="btn ghost" type="button" aria-label="Ø·Ø¨Ø§Ø¹Ø© Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù†Ø¬Ù…">Ø·Ø¨Ø§Ø¹Ø© Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù†Ø¬Ù…</button>
            <button id="shareBtn" class="btn secondary" type="button" aria-label="Ù…Ø´Ø§Ø±ÙƒØ©">Ù…Ø´Ø§Ø±ÙƒØ©</button>
            <a id="editBtn" class="btn ghost" href="edit-profile.html">ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª</a>
            <a id="homeBtn" class="btn" href="index.html">Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
          </div>
        </div>
      </section>
    </main>
  </div>

  <footer role="contentinfo">
    <div>Â© 2025 Ù…Ø´Ø§Ø¹Ù„ Ø§Ù„Ø£Ù…Ø© â€“ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</div>
    <div class="social" style="margin-top:10px">
      <a href="#" aria-label="ÙÙŠØ³Ø¨ÙˆÙƒ"><svg width="18" height="18" viewBox="0 0 24 24"><path stroke-width="1.6" d="M18 2h-3a4 4 0 0 0-4 4v3H8v4h3v8h4v-8h3l1-4h-4V6a1 1 0 0 1 1-1h3z"/></svg></a>
      <a href="#" aria-label="ØªÙˆÙŠØªØ±"><svg width="18" height="18" viewBox="0 0 24 24"><path stroke-width="1.6" d="M23 3a10.9 10.9 0 0 1-3.14 1.53A4.48 4.48 0 0 0 22.43 1s-1.8 1.06-3.4 1.47A4.5 4.5 0 0 0 12 6v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"/></svg></a>
    </div>
  </footer>

  <script>
    // Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªÙØ§Ø¹Ù„Ø§Øª ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…Ù„Ùâ€”Ù„Ø§ Ø§Ø³ØªØ¯Ø¹Ø§Ø¡Ø§Øª Ù„Ù…ÙˆØ¯ÙŠÙˆÙ„Ø§Øª Ø®Ø§Ø±Ø¬ÙŠØ© ØªÙ…Ù†Ø¹ Ø§Ù„Ø¸Ù‡ÙˆØ±
    document.addEventListener('DOMContentLoaded', () => {
      const sidebar = document.getElementById('sidebar');
      const menuBtn = document.getElementById('menuBtn');
      const overlay = document.getElementById('overlay');
      const closeSidebarBtn = document.getElementById('closeSidebarBtn');
      const userBtn = document.getElementById('userBtn');
      const userMenu = document.getElementById('userMenu');
      const themeBtn = document.getElementById('themeBtn');
      const themeIcon = document.getElementById('themeIcon');

      // Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø² Ø³Ø·Ø­ Ø§Ù„Ù…ÙƒØªØ¨ØŒ Ø§Ù„Ø´Ø±ÙŠØ· Ù…Ø±Ø¦ÙŠ Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹
      function checkWidth() {
        if (window.innerWidth <= 900) {
          sidebar.classList.add('hide');
          closeSidebarBtn.style.display = 'flex';
          menuBtn.setAttribute('aria-expanded','false');
        } else {
          sidebar.classList.remove('hide');
          closeSidebarBtn.style.display = 'none';
          overlay.classList.remove('active');
          menuBtn.setAttribute('aria-expanded','true');
        }
      }
      checkWidth();
      window.addEventListener('resize', checkWidth);

      // ØªØ­Ø¯ÙŠØ« Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø²Ø± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© (menu / x)
      function updateMenuIcon() {
        const expanded = !sidebar.classList.contains('hide');
        menuBtn.setAttribute('aria-expanded', String(expanded));
        menuBtn.innerHTML = expanded
          ? '<svg width="20" height="20" viewBox="0 0 24 24" aria-hidden="true"><path stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"/></svg>'
          : '<svg width="20" height="20" viewBox="0 0 24 24" aria-hidden="true"><path stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16"/></svg>';
      }
      updateMenuIcon();

      // toggle sidebar
      menuBtn.addEventListener('click', () => {
        const isHidden = sidebar.classList.contains('hide');
        if (isHidden) { sidebar.classList.remove('hide'); overlay.classList.add('active'); }
        else { sidebar.classList.add('hide'); overlay.classList.remove('active'); }
        updateMenuIcon();
      });
      overlay.addEventListener('click', () => { sidebar.classList.add('hide'); overlay.classList.remove('active'); updateMenuIcon(); });
      closeSidebarBtn.addEventListener('click', () => { sidebar.classList.add('hide'); overlay.classList.remove('active'); updateMenuIcon(); });

      // user menu
      userBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        const shown = userMenu.classList.toggle('show');
        userBtn.setAttribute('aria-expanded', String(shown));
        userMenu.setAttribute('aria-hidden', String(!shown));
      });
      window.addEventListener('click', (e) => {
        if (!userMenu.contains(e.target) && !userBtn.contains(e.target)) {
          userMenu.classList.remove('show');
          userMenu.setAttribute('aria-hidden','true');
          userBtn.setAttribute('aria-expanded','false');
        }
      });

      // theme toggle (light/dark)
      themeBtn.addEventListener('click', () => {
        const isLight = document.documentElement.getAttribute('data-theme') === 'light';
        if (isLight) {
          document.documentElement.removeAttribute('data-theme');
          themeBtn.setAttribute('aria-pressed','false');
          themeIcon.innerHTML = '<path stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/>';
        } else {
          document.documentElement.setAttribute('data-theme','light');
          themeBtn.setAttribute('aria-pressed','true');
          themeIcon.innerHTML = '<path stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" d="M12 3v1M12 20v1M21 12h1M2 12H3M17.657 6.343l-.707.707M6.05 17.95l-.707.707M17.657 17.657l-.707-.707M6.05 6.05l-.707-.707"/>';
        }
      });

      // copy / print / share (with fallbacks)
      const copyBtn = document.getElementById('copyBtn');
      const printBtn = document.getElementById('printBtn');
      const shareBtn = document.getElementById('shareBtn');

      // demo url (ÙŠÙ…ÙƒÙ† ØªØ­Ø¯ÙŠØ«Ù‡ Ø¨Ø¹Ø¯ Ø±Ø¨Ø· Firebase)
      copyBtn.dataset.url = copyBtn.dataset.url || 'https://example.com/evaluate?student=demo';

      copyBtn.addEventListener('click', () => {
        const url = copyBtn.dataset.url;
        if (!url) return alert('Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø±Ø§Ø¨Ø· Ø­Ø§Ù„ÙŠØ§Ù‹.');
        if (navigator.clipboard) {
          navigator.clipboard.writeText(url).then(()=>alert('ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·')).catch(()=>alert('ÙØ´Ù„ Ø§Ù„Ù†Ø³Ø®'));
        } else {
          // fallback Ù‚Ø¯ÙŠÙ…
          const ta = document.createElement('textarea'); ta.value = url; document.body.appendChild(ta); ta.select();
          try { document.execCommand('copy'); alert('ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·'); } catch(e){ alert('ÙØ´Ù„ Ø§Ù„Ù†Ø³Ø®'); }
          ta.remove();
        }
      });

      printBtn.addEventListener('click', () => {
        const fullName = document.getElementById('fullNameDisplay').textContent || 'Ø·Ø§Ù„Ø¨';
        const qrSrc = document.getElementById('qrImage').src;
        if (!qrSrc) return alert('Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø±Ù…Ø² Ù„Ù„Ø·Ø¨Ø§Ø¹Ø©.');
        const w = window.open('', '_blank');
        w.document.write(`<html lang="ar" dir="rtl"><head><meta charset="utf-8"><title>Ø¨Ø·Ø§Ù‚Ø© Ù†Ø¬Ù…</title><style>body{font-family:'Noto Kufi Arabic',sans-serif;background:#111;color:#fff;text-align:center;padding:30px}</style></head><body><h2 style="color:${getComputedStyle(document.documentElement).getPropertyValue('--accent')||'#facc15'}">ğŸŒŸ Ù…Ø´Ø§Ø¹Ù„ Ø§Ù„Ø£Ù…Ø©</h2><h3>Ø§Ù„Ø·Ø§Ù„Ø¨: ${escapeHtml(fullName)}</h3><img src="${escapeHtml(qrSrc)}" style="width:240px;height:240px;margin:18px auto;border-radius:12px" /><p style="color:#bbb">Ø§Ù…Ø³Ø­ Ø§Ù„Ø±Ù…Ø² Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø·Ø§Ù„Ø¨</p></body></html>`);
        w.document.close(); setTimeout(()=>w.print(),200);
      });

      shareBtn.addEventListener('click', async () => {
        const url = copyBtn.dataset.url;
        if (navigator.share && url) {
          try { await navigator.share({title:'ØªÙ‚ÙŠÙŠÙ… Ù†Ø¬Ù…',text:'Ù…Ù† ÙØ¶Ù„Ùƒ Ù‚ÙŠÙ‘Ù… Ø§Ù„Ø·Ø§Ù„Ø¨',url}); } catch(e) {}
        } else {
          alert('Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…Ø© â€” Ø§Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø· ÙˆØ´Ø§Ø±ÙƒÙ‡ ÙŠØ¯ÙˆÙŠØ§Ù‹.');
        }
      });

      function escapeHtml(s){ return String(s).replace(/[&<>"']/g, c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c])); }
    });
  </script>

  <!-- Ù…Ù„Ø§Ø­Ø¸Ø©: ÙƒÙˆØ¯ Firebase Ù…Ø¹Ù„Ù‚ Ù‡Ù†Ø§ Ø­ØªÙ‰ Ù„Ø§ ÙŠÙƒØ³Ø± Ø§Ù„ØµÙØ­Ø© Ù…Ø­Ù„ÙŠÙ‹Ø§.
       Ø¥Ø°Ø§ Ø£Ø±Ø¯Øª Ø§Ù„Ø±Ø¨Ø· Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ Ø£Ø³ØªØ·ÙŠØ¹ ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù…ÙˆØ¯ÙŠÙˆÙ„ ÙˆØªÙˆØ¶ÙŠØ­ Ø®Ø·ÙˆØ§Øª Ø§Ù„Ø¶Ø¨Ø· (API keys, rules).
  -->
</body>
</html>
