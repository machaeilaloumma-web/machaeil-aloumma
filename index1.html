<header class="flex items-center justify-between px-6 py-4 border-b border-gray-800 bg-[#0a0a0a]/80 backdrop-blur-md shadow-md sticky top-0 z-50">

  <!-- شعار الموقع فقط -->
  <div class="flex items-center gap-3">
    <img src="http://machaeil-aloumma.web.app/machaoumma.gif" alt="شعار مشاعل الأمة" class="w-24">
  </div>

  <!-- أيقونة المستخدم المنسدلة -->
  <div class="relative">
    <button id="userBtn" class="w-10 h-10 rounded-full bg-gray-900 border border-gray-800 flex items-center justify-center">
      <i data-lucide="user" class="w-5 h-5"></i>
    </button>
    <div id="userMenu" class="absolute right-0 mt-2 w-48 bg-gray-900 border border-gray-800 rounded-xl shadow-lg py-2 hidden flex-col z-50">
      <a href="login.html" class="px-4 py-2 text-sm hover:bg-gray-700" id="loginLink">تسجيل الدخول</a>
      <a href="register.html" class="px-4 py-2 text-sm hover:bg-gray-700" id="registerLink">إنشاء حساب</a>
      <a href="profile.html" class="px-4 py-2 text-sm hover:bg-gray-700" id="profileLink">الملف الشخصي</a>
      <a href="#" class="px-4 py-2 text-sm text-red-500 hover:bg-red-500 hover:text-white" id="logoutBtn">تسجيل الخروج</a>
    </div>
  </div>
</header>

<script>
  // فتح/إغلاق قائمة المستخدم
  const userBtn = document.getElementById("userBtn");
  const userMenu = document.getElementById("userMenu");
  userBtn.onclick = () => { userMenu.classList.toggle("hidden"); }

  window.onclick = e => {
    if (!e.target.closest("#userBtn") && !e.target.closest("#userMenu")) {
      userMenu.classList.add("hidden");
    }
  }

  // Firebase
  const logoutBtn = document.getElementById("logoutBtn");
  const loginLink = document.getElementById("loginLink");
  const registerLink = document.getElementById("registerLink");
  const profileLink = document.getElementById("profileLink");

  firebase.auth().onAuthStateChanged(user => {
    if (user) {
      // مسجل الدخول
      logoutBtn.style.display = 'block';
      profileLink.style.display = 'block';
      loginLink.style.display = 'none';
      registerLink.style.display = 'none';
    } else {
      // غير مسجل
      logoutBtn.style.display = 'none';
      profileLink.style.display = 'none';
      loginLink.style.display = 'block';
      registerLink.style.display = 'block';
    }
  });

  logoutBtn.onclick = (e) => {
    e.preventDefault();
    firebase.auth().signOut().then(() => {
      alert('تم تسجيل الخروج بنجاح');
      window.location.href = 'login.html';
    }).catch(err => {
      alert('حدث خطأ: ' + err.message);
    });
  }
</script>
